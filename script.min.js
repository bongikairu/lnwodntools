"use strict";function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||Object.prototype.toString.call(arr)==="[object Arguments]")){return}var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var _React=React,useState=_React.useState,useCallback=_React.useCallback,useEffect=_React.useEffect;var enhancePercentage="\n0=100/0/1/1\n1=90/0/1/1\n2=80/0/1/1\n3=70/0/1/1\n4=50/0/1/1\n5=45/0/2/2\n6=40/35/2/2\n7=35/35/2/2\n8=35/35/2/2\n9=35/35/2/2\n10=30/0/3/5\n11=30/35/3/5\n12=30/35/3/5\n13=30/35/3/5\n14=30/35/3/5\n15=20/0/4/8\n16=20/35/4/8\n17=20/35/4/8\n18=20/35/4/8\n19=20/35/4/8\n20=10/0/5/10\n21=10/35/5/10\n22=10/35/5/10\n23=10/35/5/10\n24=10/35/5/10\n25=5/35/6/12\n26=5/35/6/12\n27=5/35/6/12\n28=5/35/6/12\n29=5/35/6/12\n30=2/35/8/14\n";var enhancePercentageList=enhancePercentage.split("\n").filter(function(x){return x!==""}).map(function(x){return x.split("=")}).map(function(x){return{from:x[0],chance:x[1].split("/")}}).map(function(x){return{from:parseInt(x.from),successChance:parseInt(x.chance[0]),breakChance:parseInt(x.chance[1]),stoneUsage:parseInt(x.chance[2]),jellyUsage:parseInt(x.chance[3])}});var enhancePercentageDict=enhancePercentageList.reduce(function(acc,cur){return _objectSpread({},acc,_defineProperty({},cur.from,cur))},{});var worker=new Worker("worker.min.js");var WorkingImage=function WorkingImage(_ref){var status=_ref.status;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),enhStatusAnimation=_useState2[0],setEnhStatusAnimation=_useState2[1];useEffect(function(){var i=setInterval(function(){setEnhStatusAnimation(function(s){return s+1})},50);return function(){clearInterval(i)}});if(status==="idle"){return React.createElement("img",{alt:"BS",src:"images/bs_1.jpg",width:200})}else{if(enhStatusAnimation%2===1){return React.createElement("img",{alt:"BS",src:"images/bs_1.jpg",width:200})}else{return React.createElement("img",{alt:"BS",src:"images/bs_2.jpg",width:200})}}};var App=function App(){var _useState3=useState("10"),_useState4=_slicedToArray(_useState3,2),enhInputFrom=_useState4[0],setEnhInputFrom=_useState4[1];var _useState5=useState("15"),_useState6=_slicedToArray(_useState5,2),enhInputTo=_useState6[0],setEnhInputTo=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),enhInputOptJelly=_useState8[0],setEnhInputOptJelly=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),enhInputOptEvent=_useState10[0],setEnhInputOptEvent=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),enhInputOptBadLuck=_useState12[0],setEnhInputOptBadLuck=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),enhSimulationOutput=_useState14[0],setEnhSimulationOutput=_useState14[1];var _useState15=useState("idle"),_useState16=_slicedToArray(_useState15,2),enhStatus=_useState16[0],setEnhStatus=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showEnhTable=_useState18[0],setShowEnhTable=_useState18[1];useEffect(function(){worker.onmessage=function(e){if(e.data.type==="simulateEnhance"){var output=e.data.data;setEnhStatus("idle");setEnhSimulationOutput(output)}}});return React.createElement("div",{className:"mb-2"},React.createElement("h1",null,"LIONIELZ's WoDN Tools"),React.createElement("hr",null),React.createElement("h2",null,"Enhance Simulation"),React.createElement("form",{className:"form-inline"},React.createElement("div",{className:"mr-2"},"Enhance from"),React.createElement("input",{type:"number",min:0,max:50,className:"form-control",value:enhInputFrom,onChange:function onChange(e){return setEnhInputFrom(e.target.value)}}),React.createElement("div",{className:"ml-2 mr-2"},"to"),React.createElement("input",{type:"number",min:0,max:50,className:"form-control",value:enhInputTo,onChange:function onChange(e){return setEnhInputTo(e.target.value)}}),React.createElement("input",{type:"button",value:"Simulate",className:"btn btn-primary ml-sm-2 mt-2 mt-sm-0",onClick:function onClick(){var from_num=parseInt(enhInputFrom);var to_num=parseInt(enhInputTo);if(isNaN(from_num)||from_num<0||from_num>50)return alert("Please input valid from");if(isNaN(to_num)||to_num<0||to_num>50||to_num<=from_num)return alert("Please input valid to");var use_jelly=enhInputOptJelly;var added_chance=enhInputOptEvent?10:0;var multiply_chance=enhInputOptBadLuck?0.75:1;var iteration=1000000;setEnhStatus("working");worker.postMessage({type:"simulateEnhance",args:[from_num,to_num,use_jelly,added_chance,multiply_chance,iteration]})}})),React.createElement("form",{className:"form-inline"},React.createElement("div",{className:"form-check mb-2 mr-sm-2"},React.createElement("input",{className:"form-check-input",type:"checkbox",id:"enh_option_jelly",checked:enhInputOptJelly,onChange:function onChange(e){return setEnhInputOptJelly(e.target.checked)}}),React.createElement("label",{className:"form-check-label",htmlFor:"enh_option_jelly"},"Use Jelly")),React.createElement("div",{className:"form-check mb-2 mr-sm-2"},React.createElement("input",{className:"form-check-input",type:"checkbox",id:"enh_option_event",checked:enhInputOptEvent,onChange:function onChange(e){return setEnhInputOptEvent(e.target.checked)}}),React.createElement("label",{className:"form-check-label",htmlFor:"enh_option_event"},"Event +10%")),React.createElement("div",{className:"form-check mb-2 mr-sm-2"},React.createElement("input",{className:"form-check-input",type:"checkbox",id:"enh_option_badluck",checked:enhInputOptBadLuck,onChange:function onChange(e){return setEnhInputOptBadLuck(e.target.checked)}}),React.createElement("label",{className:"form-check-label",htmlFor:"enh_option_badluck"},"Bad Luck"))),React.createElement("div",{className:"mt-2"},React.createElement(WorkingImage,{status:enhStatus}),React.createElement("img",{alt:"BS",src:"images/bs_1.jpg",width:1}),React.createElement("img",{alt:"BS",src:"images/bs_2.jpg",width:1})),enhSimulationOutput.min_stone_used>0?React.createElement("div",null,React.createElement("h4",null,"Stone Usage"),"Average: ",enhSimulationOutput.average_stone_used," ea",React.createElement("br",null),"Minimum: ",enhSimulationOutput.min_stone_used," ea",React.createElement("br",null),"Maximum: ",enhSimulationOutput.max_stone_used," ea",React.createElement("br",null)):null,React.createElement("div",{className:"mt-2"},React.createElement("input",{type:"button",value:"Show Enhance Percentage Table",className:"btn btn-secondary",onClick:function onClick(){return setShowEnhTable(!showEnhTable)}}),showEnhTable?React.createElement("table",{className:"table table-condensed mt-2"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"Level"),React.createElement("th",null,"Success %"),React.createElement("th",null,"Break Down %"),React.createElement("th",null,"Stone Usage"),React.createElement("th",null,"Jelly Usage"))),enhancePercentageList.map(function(row){return React.createElement("tr",null,React.createElement("td",null,"+",row.from," to +",row.from+1),React.createElement("td",null,row.successChance,"%"),React.createElement("td",null,row.breakChance),React.createElement("td",null,row.stoneUsage),React.createElement("td",null,row.jellyUsage))})):null))};ReactDOM.render(React.createElement(App,null),document.getElementById("root"));
